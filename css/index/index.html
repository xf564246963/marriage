<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>熊峰&余盼婚礼请柬</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="screen-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <link rel="stylesheet" type="text/css" href="../css/jquery.fullPage.css" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <link rel="stylesheet" type="text/css" href="./css/base.css" />
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/imgloader.js"></script>
    <script type="text/javascript" src="../js/jquery.toast.js"></script>
    <link rel="stylesheet" href="../css/jquery.toast.css">

    <script type="text/javascript" src="../js/jquery.fullPage.js"></script>

    <script type="text/javascript" src="../js/common.js"></script>
    <script type="text/javascript" src="../js/weiXInshare.js"></script>
    <script type="text/javascript" src="../js/index.js"></script>

    <script type="text/javascript">
        $.fn.scrollUnique = function() {
            return $(this).each(function() {
                var eventType = 'scroll';
                $(this).on(eventType, function (event) {
                    // 一些数据
                    var scrollTop = this.scrollTop,
                            scrollHeight = this.scrollHeight,
                            height = this.clientHeight;

                    if ((scrollTop < 1) || (scrollHeight - height - scrollTop < 1)) {
                        // 向上滚 || 向下滚
                        event.preventDefault();
                        event.stopPropagation();
                        return false;
                    }
                });

            });
        };

        $(function () {
            window.addEventListener("onorientationchange" in window ? "orientationchange" : "resize", hengshuping, false);

            $('body').removeClass("fullpageClass2");
            if(window.screen.height-window.innerHeight > 100){
                $("#section7 .center-obj").css("height","436px");
            }else {
                $("#section7 .center-obj").css("height","456px");
            }
            $('#fullpage').fullpage({
                scrollOverflow: true,
                normalScrollElements: '.scrollable-element',
                onLeave:function (index,nextIndex,direction) {
                    pageManage[nextIndex-1]&&pageManage[nextIndex-1]();
                },
                afterRender: function() {
                },
                afterLoad: function(anchorLink,index) {
                }
            });

            //滚动子元素不影响父元素
            $('.scrollable-element').scrollUnique();

        });

        var pageManage = {
            "0":function(){

            },
            "1":function(){
                if($(".page2-bg>.center-obj>svg")){
                    $(".page2-bg>.center-obj>svg").remove();
                }
                $(".page2-bg>.center-obj").prepend('<svg class="page2-svg" xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="none" x="0px" y="0px" width="320px" height="200px" viewBox="0 0 320 200"> <g> <animateMotion path="M 30 141 Q 59.35 116.65 112.6 86.4 139.25 71.25 160 61 L 164 59.4Q 169 57.5 174 56.25 190 52.25 200 56 204 57.5 212.65 60.65 220.35 63.8 226.75 67.9 244.1 78.95 261 103" begin="0s" dur="5s" rotate="auto-reverse" fill="freeze"/> <image href="./image/train.png" height="40" width="40"/> </g> <path stroke="#ffffff" stroke-width="1" stroke-linejoin="round" stroke-linecap="round" fill="none" d="M 30 141 Q 59.35 116.65 112.6 86.4 139.25 71.25 160 61 L 164 59.4Q 169 57.5 174 56.25 190 52.25 200 56 204 57.5 212.65 60.65 220.35 63.8 226.75 67.9 244.1 78.95 261 103"/> <text font-family="幼圆" font-size="12" fill="#fff" y="160" x="25" opacity="0">孝感 <animate attributeName="opacity" from="0" to="1" begin="0s" dur="2s" fill="freeze"/> </text> <text font-family="幼圆" font-size="12" fill="#fff" y="80" x="165" opacity="0">合肥 <animate attributeName="opacity" from="0" to="1" begin="2s" dur="1.5s" fill="freeze"/> </text> <text font-family="幼圆" font-size="12" fill="#fff" y="125" x="260" opacity="0">上海 <animate attributeName="opacity" from="0" to="1" begin="3.5s" dur="1.5s" fill="freeze"/></text></svg>')
                var date = new Date();
                var month = date.getMonth()>=9?date.getMonth()+1:"0"+(date.getMonth()+1);
                //$(".page2-month").text(month);
                clearInterval(this.pageData[1].interval);
                var memorialDay = new Date("2010/12/06");
                var diffDay = parseInt(Math.abs(date.getTime() - memorialDay.getTime()) / 1000 / 60 / 60 /24);

                var inputContent = "", inputContentArr = ["2010.12.06","从孝感、合肥、到上海",diffDay+"天","一路有你","不负时光"];
                var j = 0, i = 0;
                this.pageData[1].interval = setInterval(function () {
                    var textArr = inputContentArr[j].split("");
                    inputContent += textArr[i];
                    $(".page2-context").html(inputContent+(i & 1? '_' : ''));
                    if(i>=textArr.length-1){
                        inputContent += "</br>";
                        i = 0;
                        j++;
                        if(j>=inputContentArr.length){
                            clearInterval(this.pageData[1].interval);
                            $(".page2-context").html(inputContent);
                        }
                    }else{
                        i++;
                    }
                }.bind(this),250);
            },
            pageData:{
                "1":{
                    interval:null
                }
            }
        }
    </script>
</head>
<body  class="fullpageClass1 fullpageClass2">
<div id="fullpage">
    <div class="section active" id="section1">
        <div class="section-bg page1-bg">
            <div class="center-obj">
                <div class="page1-title">Our Wedding Day</div>
                <div class="page1-flower center">
                </div>
                <img class="page1-cover center" src="./image/1-cover.png" alt=""/>
                <div class="page1-date">2018.05.20</div>
                <div class="page1-name">熊峰<span>❤</span>余盼</div>
                <div class="page1-content">我们结婚了</div>
            </div>
        </div>
        <div class="bottom-icon fadeInUp animated infinite"></div>
    </div>
    <div class="section" id="section2">
        <div class="section-bg page2-bg">
            <div class="center-obj">
                <div class="page2-context">
                </div>
                <img src="./image/heart-1.png" class="page-2-heart-1" alt=""/>
                <img src="./image/heart-4.png" class="page-2-heart-2" alt=""/>
            </div>
        </div>
        <div class="bottom-icon fadeInUp animated infinite"></div>
    </div>
    <div class="section" id="section3">
        <div class="section-bg">
            <div class="center-obj">
                <div class="page3-left-word">
                    <div>看</div>
                    <div>见</div>
                    <div>彼</div>
                    <div>此</div>
                </div>
                <div class="page3-right-word">
                    <div>即</div>
                    <div>是</div>
                    <div>青</div>
                    <div>春</div>
                </div>
                <img src="./image/3-man.jpg" alt="" class="page3-man"/>
                <img src="./image/3-woman.jpg" alt="" class="page3-woman"/>
            </div>
        </div>
        <div class="bottom-icon fadeInUp animated infinite"></div>
    </div>
    <div class="section" id="section4">
        <div class="section-bg page4-bg" >
            <!--<div class="center-obj" >-->
                <img class="page4-up" src="./image/4-up.png"/>
                <div class="page4-text">xxx</div>
                <img class="page4-down" src="./image/4-down.png" />
            <!--</div>-->
        </div>
        <div class="bottom-icon fadeInUp animated infinite"></div>
    </div>
    <div class="section" id="section5">
        <div class="section-bg page5-bg">
            <!--<div class="center-obj">-->
            <img class="page5-up" src="./image/5-up.png"/>
            <img class="page5-left" src="./image/5-left.png"/>
            <img class="page5-right"src="./image/5-right.png"/>
            <!--</div>-->
        </div>
        <div class="bottom-icon fadeInUp animated infinite"></div>
    </div>
    <div class="section" id="section7">
        <div class="section-bg page6-bg">
            <!--<div class="center-obj">-->

            <!--</div>-->
        </div>
        <div class="bottom-icon fadeInUp animated infinite"></div>
    </div>
    <div class="section" id="section8">
        <div class="section-bg page7-bg">
            <div class="center-obj">

            </div>
        </div>
        <div class="bottom-icon fadeInUp animated infinite"></div>
    </div>
    <div class="section" id="section11">
        <div class="section-bg">
            <div class="center-obj">
                <div class="end-big-text1 animated"></div>
                <div class="end-text1 animated"></div>
                <div class="end-line animated"></div>
                <div class="end-text2 animated"></div>
                <div class="end-text3 animated"></div>
                <div class="end-text4 animated"></div>
                <div class="end-text5 animated"></div>
            </div>
        </div>
    </div>
</div>
</body>
</html>